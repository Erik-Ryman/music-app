(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{2727:function(e,s,t){Promise.resolve().then(t.bind(t,3106)),Promise.resolve().then(t.bind(t,1232)),Promise.resolve().then(t.t.bind(t,1749,23))},3106:function(e,s,t){"use strict";t.r(s),t.d(s,{LikedContent:function(){return u}});var i=t(3827),n=t(3204),r=t(497),l=t(5667),a=t(9710),c=t(7907),o=t(4090);let u=e=>{let{songs:s}=e,t=(0,l.Z)(s),u=(0,c.useRouter)(),{isLoading:d,user:f}=(0,a.aF)();return((0,o.useEffect)(()=>{d||f||u.replace("/")},[d,f,u]),0===s.length)?(0,i.jsx)("div",{className:"flex flex-col gap-y-2 w-full px-6 text-neutral-400",children:"No liked songs."}):(0,i.jsx)("div",{className:"flex flex-col gap-y-2 w-full p-6",children:s.map(e=>(0,i.jsxs)("div",{className:"flex items-center gap-x-4 w-full",children:[(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(r.Z,{onClick:e=>t(e),data:e})}),(0,i.jsx)(n.Z,{songId:e.id})]},e.id))})}},9461:function(e,s,t){"use strict";var i=t(3827),n=t(4090),r=t(1367);let l=(0,n.forwardRef)((e,s)=>{let{className:t,children:n,disabled:l,type:a="button",...c}=e;return(0,i.jsx)("button",{type:a,className:(0,r.m6)("w-full rounded-full bg-blue-500 border border-transparent px-3 py-3 disabled:cursor-not-allowed disabled:opacity-50 text-black font-bold hover:opacity-75 transition",t),disabled:l,ref:s,...c,children:n})});l.displayName="Button",s.Z=l},1232:function(e,s,t){"use strict";t.r(s);var i=t(3827),n=t(1367),r=t(1249),l=t(7907),a=t(1399),c=t(9509),o=t(8009),u=t(9908),d=t(8641),f=t(5405),x=t(9710),m=t(7146),h=t(9461);s.default=e=>{let{children:s,className:t}=e,p=(0,m.Z)(),v=(0,l.useRouter)(),g=(0,f.Z)(),b=(0,c.useSupabaseClient)(),{user:j}=(0,x.aF)(),N=async()=>{let{error:e}=await b.auth.signOut();p.reset(),v.refresh(),e&&o.Am.error(e.message)};return(0,i.jsxs)("div",{className:(0,n.m6)("\n        h-fit \n        bg-gradient-to-b \n        from-blue-800 \n        p-6\n        ",t),children:[(0,i.jsxs)("div",{className:"w-full mb-4 flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"hidden md:flex gap-x-2 items-center",children:[(0,i.jsx)("button",{onClick:()=>v.back(),className:"   rounded-full    bg-black    flex    items-center    justify-center    cursor-pointer    hover:opacity-75    transition   ",children:(0,i.jsx)(r.Lrt,{className:"text-white",size:35})}),(0,i.jsx)("button",{onClick:()=>v.forward(),className:"   rounded-full    bg-black    flex    items-center    justify-center    cursor-pointer    hover:opacity-75    transition   ",children:(0,i.jsx)(r.h2L,{className:"text-white",size:35})})]}),(0,i.jsxs)("div",{className:"flex md:hidden gap-x-2 items-center",children:[(0,i.jsx)("button",{onClick:()=>v.push("/"),className:"   rounded-full    p-2    bg-white    flex    items-center    justify-center    cursor-pointer    hover:opacity-75    transition   ",children:(0,i.jsx)(u.g3P,{className:"text-black",size:20})}),(0,i.jsx)("button",{onClick:()=>v.push("/search"),className:"   rounded-full    p-2    bg-white    flex    items-center    justify-center    cursor-pointer    hover:opacity-75    transition   ",children:(0,i.jsx)(d.Goc,{className:"text-black",size:20})})]}),(0,i.jsx)("div",{className:"flex justify-between items-center gap-x-4",children:j?(0,i.jsxs)("div",{className:"flex gap-x-4 items-center",children:[(0,i.jsx)(h.Z,{onClick:N,className:"bg-white px-6 py-2",children:"Logout"}),(0,i.jsx)(h.Z,{onClick:()=>v.push("/account"),className:"bg-white",children:(0,i.jsx)(a.q1E,{})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:(0,i.jsx)(h.Z,{onClick:g.onOpen,className:"   bg-transparent    text-neutral-300    font-medium   ",children:"Sign up"})}),(0,i.jsx)("div",{children:(0,i.jsx)(h.Z,{onClick:g.onOpen,className:"bg-white px-6 py-2",children:"Log in"})})]})})]}),s]})}},3204:function(e,s,t){"use strict";var i=t(3827),n=t(4090),r=t(6128),l=t(7907),a=t(8009),c=t(9509),o=t(9710),u=t(5405);s.Z=e=>{let{songId:s}=e,t=(0,l.useRouter)(),{supabaseClient:d}=(0,c.useSessionContext)(),f=(0,u.Z)(),{user:x}=(0,o.aF)(),[m,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(null==x?void 0:x.id)&&(async()=>{let{data:e,error:t}=await d.from("liked_songs").select("*").eq("user_id",x.id).eq("song_id",s).single();!t&&e&&h(!0)})()},[s,d,null==x?void 0:x.id]);let p=m?r.M_L:r.lo,v=async()=>{if(!x)return f.onOpen();if(m){let{error:e}=await d.from("liked_songs").delete().eq("user_id",x.id).eq("song_id",s);e?a.Am.error(e.message):h(!1)}else{let{error:e}=await d.from("liked_songs").insert({song_id:s,user_id:x.id});e?a.Am.error(e.message):(h(!0),a.Am.success("Success"))}t.refresh()};return(0,i.jsx)("button",{className:"   cursor-pointer    hover:opacity-75    transition   ",onClick:v,children:(0,i.jsx)(p,{color:m?"#4dabf7":"white",size:25})})}},497:function(e,s,t){"use strict";var i=t(3827),n=t(9704);t(4090);var r=t(703);s.Z=e=>{let{data:s,onClick:t}=e,l=(0,n.Z)(s);return(0,i.jsxs)("div",{onClick:()=>{if(t)return t(s.id)},className:"flex items-center gap-x-3 cursor-pointer hover:bg-neutral-800/50 w-full p-2 rounded-md",children:[(0,i.jsx)("div",{className:"relative rounded-md min-h-[48px] min-w-[48px] overflow-hidden",children:(0,i.jsx)(r.default,{fill:!0,src:l||"/image/liked.png",alt:"Media Item",className:"object-cover"})}),(0,i.jsxs)("div",{className:"flex flex-col gap-y-1 overflow-hidden",children:[(0,i.jsx)("p",{className:"text-white truncate",children:s.title}),(0,i.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:s.artist})]})]})}},9704:function(e,s,t){"use strict";var i=t(9509);s.Z=e=>{let s=(0,i.useSupabaseClient)();if(!e)return null;let{data:t}=s.storage.from("images").getPublicUrl(e.image_path);return t.publicUrl}},5405:function(e,s,t){"use strict";let i=(0,t(2020).Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));s.Z=i},5667:function(e,s,t){"use strict";var i=t(7146),n=t(5405),r=t(9710);s.Z=e=>{let s=(0,i.Z)(),t=(0,n.Z)(),{user:l}=(0,r.aF)();return i=>{if(!l)return t.onOpen();s.setId(i),s.setIds(e.map(e=>e.id))}}},7146:function(e,s,t){"use strict";let i=(0,t(2020).Ue)(e=>({ids:[],activeId:void 0,setId:s=>e({activeId:s}),setIds:s=>e({ids:s}),reset:()=>e({ids:[],activeId:void 0})}));s.Z=i},9710:function(e,s,t){"use strict";t.d(s,{Di:function(){return a},aF:function(){return c}});var i=t(3827),n=t(4090),r=t(9509);let l=(0,n.createContext)(void 0),a=e=>{var s;let{session:t,isLoading:a,supabaseClient:c}=(0,r.useSessionContext)(),o=(0,r.useUser)(),u=null!==(s=null==t?void 0:t.access_token)&&void 0!==s?s:null,[d,f]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),[h,p]=(0,n.useState)(null),v=()=>c.from("users").select("*").single(),g=()=>c.from("subscriptions").select("*, prices(*, products(*))").in("status",["trialing","active"]).single();return(0,n.useEffect)(()=>{!o||d||x||h?o||a||d||(m(null),p(null)):(f(!0),Promise.allSettled([v(),g()]).then(e=>{let s=e[0],t=e[1];"fulfilled"===s.status&&m(s.value.data),"fulfilled"===t.status&&p(t.value.data),f(!1)}))},[o,a]),(0,i.jsx)(l.Provider,{value:{accessToken:u,user:o,userDetails:x,isLoading:a||d,subscription:h},...e})},c=()=>{let e=(0,n.useContext)(l);if(void 0===e)throw Error("useUser must be used within a MyUserContextProvider");return e}}},function(e){e.O(0,[614,422,699,259,574,354,971,69,744],function(){return e(e.s=2727)}),_N_E=e.O()}]);