(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{3742:function(e,t,r){Promise.resolve().then(r.bind(r,3310)),Promise.resolve().then(r.bind(r,1232)),Promise.resolve().then(r.bind(r,5495))},3310:function(e,t,r){"use strict";r.r(t);var n=r(3827),i=r(3204),s=r(497),l=r(5667);r(4090),t.default=e=>{let{songs:t}=e,r=(0,l.Z)(t);return t.length?(0,n.jsx)("div",{className:"flex flex-col gap-y-2 w-full px-6",children:t.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-x-4 w-full",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)(s.Z,{onClick:e=>r(e),data:e})}),(0,n.jsx)(i.Z,{songId:e.id})]},e.id))}):(0,n.jsx)("div",{className:"flex flex-col gap-y-2 w-full px-6 text-neutral-400",children:"No songs found."})}},9461:function(e,t,r){"use strict";var n=r(3827),i=r(4090),s=r(1367);let l=(0,i.forwardRef)((e,t)=>{let{className:r,children:i,disabled:l,type:a="button",...o}=e;return(0,n.jsx)("button",{type:a,className:(0,s.m6)("w-full rounded-full bg-blue-500 border border-transparent px-3 py-3 disabled:cursor-not-allowed disabled:opacity-50 text-black font-bold hover:opacity-75 transition",r),disabled:l,ref:t,...o,children:i})});l.displayName="Button",t.Z=l},1232:function(e,t,r){"use strict";r.r(t);var n=r(3827),i=r(1367),s=r(1249),l=r(7907),a=r(1399),o=r(9509),c=r(8009),u=r(9908),d=r(8641),f=r(5405),p=r(9710),m=r(7146),x=r(9461);t.default=e=>{let{children:t,className:r}=e,g=(0,m.Z)(),y=(0,l.useRouter)(),h=(0,f.Z)(),b=(0,o.useSupabaseClient)(),{user:v}=(0,p.aF)(),j=async()=>{let{error:e}=await b.auth.signOut();g.reset(),y.refresh(),e&&c.Am.error(e.message)};return(0,n.jsxs)("div",{className:(0,i.m6)("\n        h-fit \n        bg-gradient-to-b \n        from-blue-800 \n        p-6\n        ",r),children:[(0,n.jsxs)("div",{className:"w-full mb-4 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"hidden md:flex gap-x-2 items-center",children:[(0,n.jsx)("button",{onClick:()=>y.back(),className:"   rounded-full    bg-black    flex    items-center    justify-center    cursor-pointer    hover:opacity-75    transition   ",children:(0,n.jsx)(s.Lrt,{className:"text-white",size:35})}),(0,n.jsx)("button",{onClick:()=>y.forward(),className:"   rounded-full    bg-black    flex    items-center    justify-center    cursor-pointer    hover:opacity-75    transition   ",children:(0,n.jsx)(s.h2L,{className:"text-white",size:35})})]}),(0,n.jsxs)("div",{className:"flex md:hidden gap-x-2 items-center",children:[(0,n.jsx)("button",{onClick:()=>y.push("/"),className:"   rounded-full    p-2    bg-white    flex    items-center    justify-center    cursor-pointer    hover:opacity-75    transition   ",children:(0,n.jsx)(u.g3P,{className:"text-black",size:20})}),(0,n.jsx)("button",{onClick:()=>y.push("/search"),className:"   rounded-full    p-2    bg-white    flex    items-center    justify-center    cursor-pointer    hover:opacity-75    transition   ",children:(0,n.jsx)(d.Goc,{className:"text-black",size:20})})]}),(0,n.jsx)("div",{className:"flex justify-between items-center gap-x-4",children:v?(0,n.jsxs)("div",{className:"flex gap-x-4 items-center",children:[(0,n.jsx)(x.Z,{onClick:j,className:"bg-white px-6 py-2",children:"Logout"}),(0,n.jsx)(x.Z,{onClick:()=>y.push("/account"),className:"bg-white",children:(0,n.jsx)(a.q1E,{})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsx)(x.Z,{onClick:h.onOpen,className:"   bg-transparent    text-neutral-300    font-medium   ",children:"Sign up"})}),(0,n.jsx)("div",{children:(0,n.jsx)(x.Z,{onClick:h.onOpen,className:"bg-white px-6 py-2",children:"Log in"})})]})})]}),t]})}},7578:function(e,t,r){"use strict";var n=r(3827),i=r(4090),s=r(1367);let l=(0,i.forwardRef)((e,t)=>{let{className:r,type:i,disabled:l,...a}=e;return(0,n.jsx)("input",{type:i,className:(0,s.m6)("flex w-full rounded-md bg-neutral-700 border border-transparent px-3 py-3 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-400 diabled:cursor-not-allowed disabled:opacity-50 focus:outline-none",r),disabled:l,ref:t,...a})});l.displayName="Input",t.Z=l},3204:function(e,t,r){"use strict";var n=r(3827),i=r(4090),s=r(6128),l=r(7907),a=r(8009),o=r(9509),c=r(9710),u=r(5405);t.Z=e=>{let{songId:t}=e,r=(0,l.useRouter)(),{supabaseClient:d}=(0,o.useSessionContext)(),f=(0,u.Z)(),{user:p}=(0,c.aF)(),[m,x]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(null==p?void 0:p.id)&&(async()=>{let{data:e,error:r}=await d.from("liked_songs").select("*").eq("user_id",p.id).eq("song_id",t).single();!r&&e&&x(!0)})()},[t,d,null==p?void 0:p.id]);let g=m?s.M_L:s.lo,y=async()=>{if(!p)return f.onOpen();if(m){let{error:e}=await d.from("liked_songs").delete().eq("user_id",p.id).eq("song_id",t);e?a.Am.error(e.message):x(!1)}else{let{error:e}=await d.from("liked_songs").insert({song_id:t,user_id:p.id});e?a.Am.error(e.message):(x(!0),a.Am.success("Success"))}r.refresh()};return(0,n.jsx)("button",{className:"   cursor-pointer    hover:opacity-75    transition   ",onClick:y,children:(0,n.jsx)(g,{color:m?"#4dabf7":"white",size:25})})}},497:function(e,t,r){"use strict";var n=r(3827),i=r(9704);r(4090);var s=r(703);t.Z=e=>{let{data:t,onClick:r}=e,l=(0,i.Z)(t);return(0,n.jsxs)("div",{onClick:()=>{if(r)return r(t.id)},className:"flex items-center gap-x-3 cursor-pointer hover:bg-neutral-800/50 w-full p-2 rounded-md",children:[(0,n.jsx)("div",{className:"relative rounded-md min-h-[48px] min-w-[48px] overflow-hidden",children:(0,n.jsx)(s.default,{fill:!0,src:l||"/image/liked.png",alt:"Media Item",className:"object-cover"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-1 overflow-hidden",children:[(0,n.jsx)("p",{className:"text-white truncate",children:t.title}),(0,n.jsx)("p",{className:"text-neutral-400 text-sm truncate",children:t.artist})]})]})}},5495:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n={};r.r(n),r.d(n,{exclude:function(){return k},extract:function(){return y},parse:function(){return h},parseUrl:function(){return v},pick:function(){return N},stringify:function(){return b},stringifyUrl:function(){return j}});var i=r(3827);let s="%[a-f0-9]{2}",l=RegExp("("+s+")|([^%]+?)","gi"),a=RegExp("("+s+")+","gi");function o(e,t){if(!("string"==typeof e&&"string"==typeof t))throw TypeError("Expected the arguments to be of type `string`");if(""===e||""===t)return[];let r=e.indexOf(t);return -1===r?[]:[e.slice(0,r),e.slice(r+t.length)]}let c=e=>null==e,u=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%".concat(e.charCodeAt(0).toString(16).toUpperCase())),d=Symbol("encodeFragmentIdentifier");function f(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function p(e,t){return t.encode?t.strict?u(e):encodeURIComponent(e):e}function m(e,t){return t.decode?function(e){if("string"!=typeof e)throw TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch(t){return function(e){let t={"%FE%FF":"��","%FF%FE":"��"},r=a.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(n){let e=function(e){try{return decodeURIComponent(e)}catch(r){let t=e.match(l)||[];for(let r=1;r<t.length;r++)t=(e=(function e(t,r){try{return[decodeURIComponent(t.join(""))]}catch(e){}if(1===t.length)return t;r=r||1;let n=t.slice(0,r),i=t.slice(r);return Array.prototype.concat.call([],e(n),e(i))})(t,r).join("")).match(l)||[];return e}}(r[0]);e!==r[0]&&(t[r[0]]=e)}r=a.exec(e)}for(let r of(t["%C2"]="�",Object.keys(t)))e=e.replace(RegExp(r,"g"),t[r]);return e}(e)}}(e):e}function x(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function g(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function y(e){let t=(e=x(e)).indexOf("?");return -1===t?"":e.slice(t+1)}function h(e,t){f((t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t}).arrayFormatSeparator);let r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{if(t=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),!t){n[e]=r;return}void 0===n[e]&&(n[e]={}),n[e][t[1]]=r};case"bracket":return(e,r,n)=>{if(t=/(\[])$/.exec(e),e=e.replace(/\[]$/,""),!t){n[e]=r;return}if(void 0===n[e]){n[e]=[r];return}n[e]=[...n[e],r]};case"colon-list-separator":return(e,r,n)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){n[e]=r;return}if(void 0===n[e]){n[e]=[r];return}n[e]=[...n[e],r]};case"comma":case"separator":return(t,r,n)=>{let i="string"==typeof r&&r.includes(e.arrayFormatSeparator),s="string"==typeof r&&!i&&m(r,e).includes(e.arrayFormatSeparator);r=s?m(r,e):r;let l=i||s?r.split(e.arrayFormatSeparator).map(t=>m(t,e)):null===r?r:m(r,e);n[t]=l};case"bracket-separator":return(t,r,n)=>{let i=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!i){n[t]=r?m(r,e):r;return}let s=null===r?[]:r.split(e.arrayFormatSeparator).map(t=>m(t,e));if(void 0===n[t]){n[t]=s;return}n[t]=[...n[t],...s]};default:return(e,t,r)=>{if(void 0===r[e]){r[e]=t;return}r[e]=[...[r[e]].flat(),t]}}}(t),n=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return n;for(let i of e.split("&")){if(""===i)continue;let e=t.decode?i.replace(/\+/g," "):i,[s,l]=o(e,"=");void 0===s&&(s=e),l=void 0===l?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?l:m(l,t),r(m(s,t),l,n)}for(let[e,r]of Object.entries(n))if("object"==typeof r&&null!==r)for(let[e,n]of Object.entries(r))r[e]=g(n,t);else n[e]=g(r,t);return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((e,t)=>{let r=n[t];return r&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}function b(e,t){if(!e)return"";f((t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t}).arrayFormatSeparator);let r=r=>t.skipNull&&c(e[r])||t.skipEmptyString&&""===e[r],n=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let i=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[p(t,e),"[",i,"]"].join("")]:[...r,[p(t,e),"[",p(i,e),"]=",p(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[p(t,e),"[]"].join("")]:[...r,[p(t,e),"[]=",p(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[p(t,e),":list="].join("")]:[...r,[p(t,e),":list=",p(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:(i=null===i?"":i,0===n.length)?[[p(r,e),t,p(i,e)].join("")]:[[n,p(i,e)].join(e.arrayFormatSeparator)]}default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,p(t,e)]:[...r,[p(t,e),"=",p(n,e)].join("")]}}(t),i={};for(let[t,n]of Object.entries(e))r(t)||(i[t]=n);let s=Object.keys(i);return!1!==t.sort&&s.sort(t.sort),s.map(r=>{let i=e[r];return void 0===i?"":null===i?p(r,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?p(r,t)+"[]":i.reduce(n(r),[]).join("&"):p(r,t)+"="+p(i,t)}).filter(e=>e.length>0).join("&")}function v(e,t){var r,n;t={decode:!0,...t};let[i,s]=o(e,"#");return void 0===i&&(i=e),{url:null!==(n=null==i?void 0:null===(r=i.split("?"))||void 0===r?void 0:r[0])&&void 0!==n?n:"",query:h(y(e),t),...t&&t.parseFragmentIdentifier&&s?{fragmentIdentifier:m(s,t)}:{}}}function j(e,t){t={encode:!0,strict:!0,[d]:!0,...t};let r=x(e.url).split("?")[0]||"",n=b({...h(y(e.url),{sort:!1}),...e.query},t);n&&(n="?".concat(n));let i=function(e){let t="",r=e.indexOf("#");return -1!==r&&(t=e.slice(r)),t}(e.url);if(e.fragmentIdentifier){let n=new URL(r);n.hash=e.fragmentIdentifier,i=t[d]?n.hash:"#".concat(e.fragmentIdentifier)}return"".concat(r).concat(n).concat(i)}function N(e,t,r){let{url:n,query:i,fragmentIdentifier:s}=v(e,r={parseFragmentIdentifier:!0,[d]:!1,...r});return j({url:n,query:function(e,t){let r={};if(Array.isArray(t))for(let n of t){let t=Object.getOwnPropertyDescriptor(e,n);(null==t?void 0:t.enumerable)&&Object.defineProperty(r,n,t)}else for(let n of Reflect.ownKeys(e)){let i=Object.getOwnPropertyDescriptor(e,n);if(i.enumerable){let s=e[n];t(n,s,e)&&Object.defineProperty(r,n,i)}}return r}(i,t),fragmentIdentifier:s},r)}function k(e,t,r){return N(e,Array.isArray(t)?e=>!t.includes(e):(e,r)=>!t(e,r),r)}var w=r(4090),C=function(e,t){let[r,n]=(0,w.useState)(e);return(0,w.useEffect)(()=>{let r=setTimeout(()=>{n(e)},t||500);return()=>{clearTimeout(r)}},[e,t]),r},F=r(7907),O=r(7578),S=()=>{let e=(0,F.useRouter)(),[t,r]=(0,w.useState)(""),s=C(t,500);return(0,w.useEffect)(()=>{let t=n.stringifyUrl({url:"/search",query:{title:s}});e.push(t)},[s,e]),(0,i.jsx)(O.Z,{placeholder:"What do you want to listen to?",value:t,onChange:e=>r(e.target.value)})}},9704:function(e,t,r){"use strict";var n=r(9509);t.Z=e=>{let t=(0,n.useSupabaseClient)();if(!e)return null;let{data:r}=t.storage.from("images").getPublicUrl(e.image_path);return r.publicUrl}},5405:function(e,t,r){"use strict";let n=(0,r(2020).Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));t.Z=n},5667:function(e,t,r){"use strict";var n=r(7146),i=r(5405),s=r(9710);t.Z=e=>{let t=(0,n.Z)(),r=(0,i.Z)(),{user:l}=(0,s.aF)();return n=>{if(!l)return r.onOpen();t.setId(n),t.setIds(e.map(e=>e.id))}}},7146:function(e,t,r){"use strict";let n=(0,r(2020).Ue)(e=>({ids:[],activeId:void 0,setId:t=>e({activeId:t}),setIds:t=>e({ids:t}),reset:()=>e({ids:[],activeId:void 0})}));t.Z=n},9710:function(e,t,r){"use strict";r.d(t,{Di:function(){return a},aF:function(){return o}});var n=r(3827),i=r(4090),s=r(9509);let l=(0,i.createContext)(void 0),a=e=>{var t;let{session:r,isLoading:a,supabaseClient:o}=(0,s.useSessionContext)(),c=(0,s.useUser)(),u=null!==(t=null==r?void 0:r.access_token)&&void 0!==t?t:null,[d,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)(null),[x,g]=(0,i.useState)(null),y=()=>o.from("users").select("*").single(),h=()=>o.from("subscriptions").select("*, prices(*, products(*))").in("status",["trialing","active"]).single();return(0,i.useEffect)(()=>{!c||d||p||x?c||a||d||(m(null),g(null)):(f(!0),Promise.allSettled([y(),h()]).then(e=>{let t=e[0],r=e[1];"fulfilled"===t.status&&m(t.value.data),"fulfilled"===r.status&&g(r.value.data),f(!1)}))},[c,a]),(0,n.jsx)(l.Provider,{value:{accessToken:u,user:c,userDetails:p,isLoading:a||d,subscription:x},...e})},o=()=>{let e=(0,i.useContext)(l);if(void 0===e)throw Error("useUser must be used within a MyUserContextProvider");return e}}},function(e){e.O(0,[614,422,699,259,574,354,971,69,744],function(){return e(e.s=3742)}),_N_E=e.O()}]);